{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nlet currentPage = 1;\nlet searchQuery = '';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const searchForm = document.querySelector(\"#searchForm\");\n    const galleryContainer = document.querySelector(\".gallery\");\n    const lightbox = new SimpleLightbox(\".gallery a\");\n    const loadMoreBtn = document.getElementById(\"loadMoreBtn\");\n    const loadingIndicator = document.getElementById(\"loadingIndicator\");\n\n    searchForm.addEventListener(\"submit\", handleFormSubmit);\n    loadMoreBtn.addEventListener(\"click\", loadMoreImages);\n\n    async function handleFormSubmit(event) {\n        event.preventDefault();\n\n        searchQuery = document.querySelector(\"#searchQuery\").value;\n        if (!searchQuery.trim()) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Please enter a search query.\",\n            });\n            return;\n        }\n\n        try {\n            currentPage = 1;\n            await fetchImages(searchQuery);\n            showLoadMoreButton();\n        } catch (error) {\n            console.error(\"Error handling form submission:\", error);\n        }\n    }\n\n    async function fetchImages(query, page = 1) {\n        const apiKey = `41927432-a4c56e3ebe36f8f9b7d51fc62`;\n        const perPage = 40;\n        const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}`;\n\n        try {\n            if (page === 1) {\n                iziToast.info({\n                    title: \"Loading\",\n                    message: \"Fetching images...\",\n                });\n            } else {\n                showLoadingIndicator();\n            }\n            const response = await axios.get(apiUrl);\n            const data = response.data;\n            if (page === 1) {\n                renderImages(data.hits);\n            } else {\n                appendImages(data.hits);\n                scrollPageSmoothly(getGalleryCardHeight());\n            }\n                hideLoadingIndicator();\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n            iziToast.error({\n                title: \"Error\",\n                message: \"Failed to fetch images. Please try again.\",\n            });\n        }\n    }\n\n    function renderImages(images) {\n        galleryContainer.innerHTML = \"\";\n\n        if (images.length === 0) {\n            iziToast.warning({\n                title: \"No Results\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            hideLoadMoreButton();\n            return;\n        }\n\n        images.forEach(image => {\n            const imageCard = createImageCard(image);\n            galleryContainer.appendChild(imageCard);\n        });\n\n        lightbox.refresh();\n        showLoadMoreButton();\n    }\n\n    function appendImages(images) {\n        if (images.length === 0) {\n            hideLoadMoreButton();\n            return;\n        }\n\n        images.forEach(image => {\n            const imageCard = createImageCard(image);\n            galleryContainer.appendChild(imageCard);\n        });\n\n        lightbox.refresh();\n        showLoadMoreButton();\n    }\n\n    function createImageCard(image) {\n        const card = document.createElement('div');\n        card.className = 'image-card';\n\n        const link = document.createElement('a');\n        link.href = image.largeImageURL;\n        link.setAttribute('data-lightbox', 'gallery');\n\n        const img = document.createElement('img');\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n\n        const likes = document.createElement('span');\n        likes.textContent = `Likes: ${image.likes}`;\n\n        const views = document.createElement('span');\n        views.textContent = `Views: ${image.views}`;\n\n        const comments = document.createElement('span');\n        comments.textContent = `Comments: ${image.comments}`;\n\n        const downloads = document.createElement('span');\n        downloads.textContent = `Downloads: ${image.downloads}`;\n\n        link.appendChild(img);\n        link.appendChild(likes);\n        link.appendChild(views);\n        link.appendChild(comments);\n        link.appendChild(downloads);\n        card.appendChild(link);\n        return card;\n    }\n async function loadMoreImages() {\n    currentPage++;\n    await fetchImages(searchQuery, currentPage);\n  }\n\n  function showLoadMoreButton() {\n    loadMoreBtn.style.display = 'inline-block';\n  }\n\n  function hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n  }\n\n  function showLoadingIndicator() {\n    loadingIndicator.style.display = 'block';\n  }\n\n  function hideLoadingIndicator() {\n    loadingIndicator.style.display = 'none';\n    }\n\nfunction getGalleryCardHeight() {\n    const galleryCard = document.querySelector(\".image-card\");\n    const cardRect = galleryCard.getBoundingClientRect();\n    return cardRect.height;\n  }\n\n  function scrollPageSmoothly(scrollDistance) {\n    window.scrollBy({\n      top: scrollDistance,\n      behavior: \"smooth\",\n    });\n  }\n\n  });\n\n"],"names":["currentPage","searchQuery","searchForm","galleryContainer","lightbox","SimpleLightbox","loadMoreBtn","loadingIndicator","handleFormSubmit","loadMoreImages","event","iziToast","fetchImages","showLoadMoreButton","error","query","page","apiUrl","showLoadingIndicator","data","axios","renderImages","appendImages","scrollPageSmoothly","getGalleryCardHeight","hideLoadingIndicator","images","hideLoadMoreButton","image","imageCard","createImageCard","card","link","img","likes","views","comments","downloads","scrollDistance"],"mappings":"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"}